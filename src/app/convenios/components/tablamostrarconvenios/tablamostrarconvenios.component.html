<div class="container-fluid titulo">
  <h3>Convenios UTM</h3>
</div>
<div class="container-fluid selector">
  <form [formGroup]="selector" autocomplete="off">
    <div class="col-sm">
      <mat-form-field class="container-fill" appearance="fill">
        <mat-label>Tipos de Convenios</mat-label>
        <mat-select
          formControlName="conveniostipo"
          (selectionChange)="cambioConveniosTipos($event)"
        >
          <mat-option value="A">Convenios Aprobados</mat-option>
          <mat-option value="G">Convenios Guardados</mat-option>
          <mat-option value="P">Convenios Plantillas</mat-option>
        </mat-select>
      </mat-form-field>
      <div
        *ngIf="
          selector.get('conveniostipo')?.hasError('required') &&
          selector.get('conveniostipo')?.touched
        "
        style="margin-top: -20px"
      >
        <span class="mda-form-msg"
          >Este campo es <strong>requerido</strong></span
        >
      </div>
    </div>
  </form>
</div>

<ng-container *ngIf="tabla == true">
  <!-- <form autocomplete="off"> -->
    <div style="margin: 15px">
      <mat-form-field class="mat-form-field-filtro">
        <mat-label>Filtro</mat-label>
        <input
          matInput [(ngModel)]="filtro"
          (keyup)="applyFilter($event)"
          placeholder="Filtro Tabla"
        />
        <button *ngIf="filtro" matSuffix mat-icon-button aria-label="Clear" (click)="filtro=''">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>

      <!-- <table mat-table class="mat-elevation-z8" >
      
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef > N° </th>
            <td mat-cell *matCellDef="let element"> {{element.position}} </td>
          </ng-container>

          
          <ng-container matColumnDef="titulo_convenio">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Nombre Titulo </th>
            <td mat-cell *matCellDef="let element" style="text-align: center;"> {{element.titulo_convenio}} </td>
          </ng-container>

       
          <ng-container matColumnDef="f_creacion">
            <th mat-header-cell *matHeaderCellDef> Fecha Creacion </th>
            <td mat-cell *matCellDef="let element"> {{element.f_creacion}} </td>
          </ng-container>
        
          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef> Acciones </th>
            <td mat-cell *matCellDef="let element" style="text-align: center;"> 
                <ng-container *ngIf="selector.get('conveniostipo')?.value=='P'|| selector.get('conveniostipo')?.value=='G'">
                  <a title="Observar convenio" class="pointer" style="color: rgb(56, 39, 116)!important">
                      <mat-icon>visibility</mat-icon>
                  </a>
                </ng-container>
                <ng-container *ngIf="selector.get('conveniostipo')?.value=='A'">
                  <a title="Observar convenio" target="_blank" href="{{element.PDF}}" class="pointer" style="color: rgb(56, 39, 116)!important">
                      <mat-icon>visibility</mat-icon>
                  </a>

              </ng-container>
            
           
            </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table> -->

      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Titulo</th>
            <th scope="col">F. Creación</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of listaConv | pagination :pageSize :pageNumber | buscarConvenio :filtro;">
            <th scope="row">{{c.position}}</th>
            <td>{{c.titulo_convenio}}</td>
            <td>{{c.fecha_creacion}}</td>
            <td>@mdo</td>
          </tr>
        </tbody>
      </table>

      <div>
        <mat-paginator [length]="listaConv.length" [pageSize]="pageSize"
                    [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page" (page)="handlePagePending($event)">
        </mat-paginator>
      </div>
    </div>
  <!-- </form> -->
</ng-container>
